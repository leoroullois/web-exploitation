FROM node:16-alpine

ENV PORT 5000

RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app/

COPY package.json yarn.lock /usr/src/app/
RUN yarn

COPY . /usr/src/app/

RUN yarn prisma generate --schema ./prisma/schema.prisma && yarn generate
# RUN yarn prisma migrate dev
# RUN yarn migrate:deploy && yarn build

EXPOSE 5000

CMD ["yarn", "dev"]