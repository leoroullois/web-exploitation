import { useRouter } from "next/router";
import React, { FC, PropsWithChildren, useEffect, useState } from "react";

import { AUTH_TOKEN } from "@utils/constants";
import Loading from "@common/loading/Loading";

const PrivateRoute: FC<PropsWithChildren> = ({ children }) => {
   const router = useRouter();
   const [token, setToken] = useState<string | undefined | null>(undefined);
   useEffect(() => {
      setToken(localStorage.getItem(AUTH_TOKEN));
   }, []);

   if (typeof window !== "undefined" && token === null) {
      router.push("/login");
   }
   if (token === undefined) {
      return <Loading />;
   }
   return <>{children}</>;
};

export default PrivateRoute;

